// Cyber Baron created by Ben2k9/Virtue
ACTOR Cyberbaron : Baronofhell 7543 
{ 
  //$Category Barons
  obituary "%o Was Exploited By A CyberBaron"
  hitobituary "%o Learned to not understimate the strenght of Cyber Barons" 
  health 1200
  radius 24
  height 64
  mass 1000
  speed 16
  painchance 40
  seesound "cbaron/sight"
  painsound "cbaron/pain"
  deathsound "cbaron/death"
  activesound "cbaron/active"
  MONSTER
  +NOINFIGHTING
  +NORADIUSDMG
  +MISSILEMORE
  +MISSILEEVENMORE
  +DONTHARMSPECIES
  Species "KX"
  DamageFactor "KX", 0.0
  DamageType "KX"
  states
  {
  Spawn:
    CBOS AB 10 A_Look
    loop
  See:
    CBOS A 0 A_ChangeFlag("NOPAIN",0)
	CBOS A 3 A_Chase
    CBOS A 3 A_Chase   
    CBOS B 0 A_PlaySound("cbaron/metal",CHAN_6,1.0)
    CBOS BB 3 A_Chase
    CBOS CCD 3 A_Chase    
	CBOS D 0 A_PlaySound("cbaron/Step",CHAN_7,1.0)
	CBOS D 3 A_Chase
    loop
  Melee:
    CBOS A 0 A_ChangeFlag("NOPAIN",1)
    CBOS PQ 6 A_FaceTarget
    CBOS R 6 A_CustomComboAttack("KXCyberBaronBall", 32, 5 * random(10, 20), "baron/melee")
	CBOS A 0 A_ChangeFlag("NOPAIN",0)
    Goto See
  InstaMelee:
	CBOS E 0 A_PlaySound("cbaron/DashHit",CHAN_ITEM,1.0)
    CBOS E 0 A_FaceTarget
	CBOS E 0 A_ScaleVelocity(0)
    CBOS Q 4 A_CustomMeleeAttack(5*random(10,20),"cbaron/DashHit","","Melee",True)
	CBOS RR 4 A_FaceTarget
    Goto See
  Missile:
    TNT1 A 0 A_Jump(256,"Baron","Rocket","Dash","Stomp", "Baron2")
	Goto See
  Rocket:
    CBOS E 0 A_PlaySound("cbaron/Ready",CHAN_WEAPON,1.0)
    CBOS EEEE 5 A_FaceTarget
	CBOS F 0 Bright A_customMissile("KXCyberBaronRocketEffect",29,16,0)
    CBOS F 5 Bright A_customMissile("CyberBaronRocket",27,16,0)
    CBOS EEE 5 A_FaceTarget
    goto See
  Baron:
    CBOS PQ 4 A_FaceTarget
	CBOS RR 1 A_CustomMissile("KXCyberBaronBall",32,0,frandom(-10,10))
    CBOS R 2 A_CustomComboAttack("KXCyberBaronBall",32,5*random(10,30),"baron/melee")
	TNT1 A 0 A_Jump(128,1)
    Goto See      
	CBOS PQ 4 A_FaceTarget
    CBOS RR 1 A_CustomMissile("KXCyberBaronBall",32,0,frandom(-10,10))
    CBOS R 2 A_CustomComboAttack("KXCyberBaronBall",32,5*random(10,30),"baron/melee")
	TNT1 A 0 A_Jump(128,1)
    Goto See   
	CBOS PQ 4 A_FaceTarget
    CBOS RR 1 A_CustomMissile("KXCyberBaronBall",32,0,frandom(-10,10))
    CBOS R 2 A_CustomComboAttack("KXCyberBaronBall",32,5*random(10,30),"baron/melee")
    Goto See
  Baron2:
	CBOS PQ 8 A_FaceTarget
	CBOS R 0 A_FaceTarget
	CBOS R 0 A_CustomMissile("KXCyberBaronBall",32,0,10)
	CBOS R 0 A_CustomMissile("KXCyberBaronBall",32,0,20)
	CBOS R 0 A_CustomMissile("KXCyberBaronBall",32,0,0)
	CBOS R 0 A_CustomMissile("KXCyberBaronBall",32,0,-10)
	CBOS R 0 A_CustomMissile("KXCyberBaronBall",32,0,-20)
	CBOS R 8 A_FaceTarget
	TNT1 A 0 A_Jump(128,1)
	Goto See
	CBOS PQ 8 A_FaceTarget
	CBOS R 0 A_FaceTarget
	CBOS R 0 A_CustomMissile("KXCyberBaronBall",32,0,10)
	CBOS R 0 A_CustomMissile("KXCyberBaronBall",32,0,20)
	CBOS R 0 A_CustomMissile("KXCyberBaronBall",32,0,0)
	CBOS R 0 A_CustomMissile("KXCyberBaronBall",32,0,-10)
	CBOS R 0 A_CustomMissile("KXCyberBaronBall",32,0,-20)
	CBOS R 8 A_FaceTarget
	Goto See
  Stomp:
    CBOS A 0 A_PlaySound("cbaron/roar",CHAN_VOICE,1.0)
    CBOS PPPPPA 4 A_FaceTarget
	CBOS P 0 Bright A_PlaySound("cbaron/jump")
	TNT1 A 0 ThrustThingZ(0,30,0,1)
	TNT1 A 0 A_Recoil(-35)
	TNT1 AAAAAAAAAA 0 A_SpawnItemEx("KXArachnobaronDust",0,0,3,random(-6,6),random(-6,6),random(0,1),random(0,360))
	TNT1 A 0 A_FaceTarget
	Goto StompAnimation
  StompAnimation:
	CBOS P 1 BRIGHT A_SpawnItemEx("KXCyberBaronDashTrailOne",0,0,0,0,0,0,0,SXF_CLIENTSIDE)
	CBOS P 0 Bright A_JumpIfCloser(70,"EndStomp")
	CBOS P 0 BRIGHT A_JumpIf(Momz==0,"EndStomp")
	Loop
  EndStomp:
    CBOS Q 0 BRIGHT A_SpawnItemEx("KXStompEffect",0,0,3,0,0,0,0,SXF_CLIENTSIDE|SXF_NOCHECKPOSITION)
	TNT1 A 0 A_PlaySound("cbaron/Stomp")
	TNT1 A 0 A_Explode(176,180)
	CBOS R 20 A_ScaleVelocity(0)
	Goto See
  Dash:
    CBOS P 5 A_FaceTarget
	CBOS P 0 Bright A_PlaySound("cbaron/dash")
	TNT1 A 0 ThrustThingZ(0,10,0,1)
	TNT1 A 0 A_Recoil(-30)
	TNT1 A 0 A_FaceTarget
	Goto RealDash
  RealDash:
    CBOS P 0 A_SpawnItemEx("KXCyberBaronDashTrailOne", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS P 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS P 0 A_SpawnItemEx("KXCyberBaronDashTrailOne", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS P 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS P 0 A_SpawnItemEx("KXCyberBaronDashTrailOne", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS P 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS P 0 A_SpawnItemEx("KXCyberBaronDashTrailOne", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS P 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS P 0 A_SpawnItemEx("KXCyberBaronDashTrailOne", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS P 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS Q 0 A_SpawnItemEx("KXCyberBaronDashTrailTwo", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS Q 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS Q 0 A_SpawnItemEx("KXCyberBaronDashTrailTwo", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS Q 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS Q 0 A_SpawnItemEx("KXCyberBaronDashTrailTwo", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS Q 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS Q 0 A_SpawnItemEx("KXCyberBaronDashTrailTwo", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS Q 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS Q 0 A_SpawnItemEx("KXCyberBaronDashTrailTwo", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS Q 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS R 0 A_SpawnItemEx("KXCyberBaronDashTrailThree", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS R 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS R 0 A_SpawnItemEx("KXCyberBaronDashTrailThree", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS R 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS R 0 A_SpawnItemEx("KXCyberBaronDashTrailThree", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS R 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS R 0 A_SpawnItemEx("KXCyberBaronDashTrailThree", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS R 1 Bright A_JumpIfCloser(70,"DashCheck")
	CBOS R 0 A_SpawnItemEx("KXCyberBaronDashTrailThree", 0, 0, 0, 0, 0, 0, 0, SXF_CLIENTSIDE)
	CBOS R 1 Bright A_JumpIfCloser(70,"DashCheck")
	TNT1 A 0 A_ChangeFlag(SLIDESONWALLS,0)
	TNT1 A 0 A_Jump(80,"Dash")
    Goto See
  DashCheck:
    TNT1 A 0 A_JumpIfTargetInsideMeleeRange("InstaMelee")
	Goto See
  Pain:
    CBOS H 2
    CBOS H 2 A_Pain
    goto See
  Death:
    CBOS I 8
    CBOS J 8 A_Scream
    CBOS K 0 
	CBOS K 4 bright
	CBOS A 0 A_SpawnItemEx("KXCyberBaronExplosionDeathEffectSpawner",0,0,1,0,0,0,0,SXF_NOCHECKPOSITION)
	CBOS K 4 bright
    CBOS L 8 bright A_NoBlocking
    CBOS M 8 bright
    CBOS N 8 bright
    CBOS O -1
    stop
   }
}  

ACTOR KXCyberBaronDashTrailOne
{   
    RenderStyle Translucent
	+NoGravity
    +ClientSideOnly
    +DontSplash
	+NoBlockMap
    +NoInteraction
	+Noclip
	Alpha 1.0
    States
    {
    Spawn:
      TNT1 A 1
	  CBOS P 1 A_FadeOut(0.05)
      Goto Spawn+1 
	  }
}

ACTOR KXCyberBaronDashTrailTwo : KXCyberBaronDashTrailOne
{   
    States
    {
    Spawn:
      TNT1 A 1
	  CBOS Q 1 A_FadeOut(0.05)
      Goto Spawn+1 
	  }
}

ACTOR KXCyberBaronDashTrailThree : KXCyberBaronDashTrailOne
{   
    States
    {
    Spawn:
      TNT1 A 1
	  CBOS R 1 A_FadeOut(0.05)
      Goto Spawn+1 
	  }
}
ACTOR KXRocketLauncher : KXBaseWeapon replaces RocketLauncher
{
    Weapon.AmmoUse2 5
    Weapon.AmmoType2 "RocketAmmo"
	Tag "Rocket Launcher"
	Inventory.PickupSound "weapons/Rocketup"
	Weapon.UpSound "weapons/Rocketup"
	Weapon.SelectionOrder 2500
	Weapon.SlotNumber 5
    Weapon.AmmoUse 1
    Weapon.AmmoGive 2
	+WEAPON.NOAUTOFIRE
    Weapon.AmmoType "RocketAmmo"
    Inventory.PickupMessage "$GOTLAUNCHER"
    States
	{
	Ready:
		MISG A 0 A_JumpIfInventory("KXFireSkillToken", 1, "KXSkillFire") 
        MISG A 1 A_WeaponReady
        Loop
	Deselect:
	    MISG A 0 A_Lower
        MISG A 1 A_Lower
        Loop
    Select:
		PKRL B 1 Offset(-57,92)
	    FSWD A 0 A_TakeInventory("KXFireSkillToken") 
		PKRL B 1 Offset(-56,82)
		PKRL D 1 Offset(-55,77)
		PKRL D 1 Offset(-54,72)
		PKRL C 1 Offset(-52,67)
		PKRL C 1 Offset(-49,62)
		PKRL B 1 Offset(-45,57)
		PKRL B 1 Offset(-40,52)
		PKRL E 1 Offset(-34,47)
		PKRL E 1 Offset(-27,42)
		PKRL F 1 Offset(-19,37)
		PKRL G 1 Offset(-10,32)
		Goto Ready
	Fire:
		PKRL A 2 
		PKRL A 4 A_GunFlash
		PKRL B 2 
		PKRL C 0 A_PlaySound("weapons/rocklf",CHAN_WEAPON)
		PKRL C 0 A_FireCustomMissile("KXPlayerRocket", 0, 1, 0, 0)
		PKPL A 0 Radius_Quake(4,4,0,1,0)
		PKPL A 0 A_ZoomFactor(0.975)
		PKRL C 1 OffSet(0,42) A_ZoomFactor(0.950)
		PKRL C 1 OffSet(0,52) A_ZoomFactor(0.925)
		PKRL C 1 OffSet(0,62) A_ZoomFactor(0.9)
		PKRL D 1 OffSet(0,52) A_ZoomFactor(0.925)
		PKRL D 1 OffSet(0,42) A_ZoomFactor(0.950)
		PKRL D 1 OffSet(0,32) A_ZoomFactor(0.975)
		PKRL BE 2 A_ZoomFactor(1.00)
		PKRL FG 1
		PKRL A 0 A_ReFire
		Goto Ready
	Flash:
		PKRF A 3 Bright A_Light1
		PKRF B 2 Bright
		PKRF C 2 Bright A_Light2
		PKRF DE 3 Bright
		Goto LightDone
	AltFire:
        MISG A 0 A_JumpIfInventory("RocketLauncherUpgrade", 1, "Alternative")
        Goto Ready
	Alternative:
	     MISG A 20 A_PlaySoundEx("Fire/charge","Weapon")
		 PKRL A 2 
		 PKRL A 4 A_GunFlash
		 PKRL B 2 A_PlaySoundEx("Fire/fire","Weapon")
		 PKRL D 3 A_FireCustomMissile("PlayerHellCybruiserMissile", 0, 1, 0, 0)
		 PKRL C 3 
		 PKRL BE 2 
		 PKRL FG 1 
		 PKRL A 0 A_ReFire
         Goto Ready
    Spawn:
         LAUN A -1
         Stop
    KXSkillLower:
        FSWD A 1 bright Offset(0,40)
	    FSWD A 1 bright Offset(0,50)
	    FSWD B 1 bright Offset(0,60)
	    FSWD B 1 bright Offset(0,70)
		MISG A 1 bright Offset(0,70)
	    MISG A 1 bright Offset(0,60)
	    MISG A 1 bright Offset(0,50)
	    MISG A 1 bright Offset(0,40)
		Goto Ready
	}
}

ACTOR KXPlayerRocket : KXRocket { +THRUSPECIES +MTHRUSPECIES Species "Marines" SeeSound "" }